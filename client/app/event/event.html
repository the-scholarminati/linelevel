<section ng-controller="eventController">
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
  <div class="container">
    <div class="pageTitle">
      <div style="display:flex; flex-flow: row nowrap">
        <h1>{{event.name}}</h1>
        <div id="eventHost">
          hosted by <span id="eventHostName">{{event.host}}</span>
        </div>
      </div>
      <div id="chatToggle">
        <div id="showChat"><a href="javascript:void(0)" onclick="document.getElementById('hideChat').style.display='block';document.getElementById('showChat').style.display='none'" ng-click="toggleChat()">Show Chat</a></div>
        <div id="hideChat"><a href="javascript:void(0)" onclick="document.getElementById('showChat').style.display='block';document.getElementById('hideChat').style.display='none'" ng-click="toggleChat()">Hide Chat</a></div>
      </div>
    </div>
    <div class="line"></div>
    <div id="genreNames">
      <div ng-repeat="genre in event.genres"> {{genre.name}}<span ng-if="$index !== event.genres.length-1">, &nbsp;</span> </div>
    </div>

    <!-- host admin panel for setting up the stream -->
    <!-- can we call the method on the factory? might need to set that method in the scope to call it here -->
    <div ng-if="appFactory.isSameUser(event.host)">
      <button ng-click="auth();">Authorize</button>
      <button ng-click="placeVideo();">placeVideo</button>
    </div>

    <div id="eventcontent">
      <div id="videoWrapper">
        <div id="ytplayer"></div>
        <span class="video"></span>
      </div>
      <div id="chatcontent" ng-show="chatVisible">
        <div id="chatMessages">
          <div ng-if="isInitialized()" ng-repeat="message in event.messages" class="message"><b>{{message.username}}:</b> {{message.message}}</div>
        </div>
        <textarea id="chatTextbox" ng-model="userText"></textarea>
        <br>
        <div id="sendButton" ng-click="sendMessage()">
        <button>Send</button>
        </div>
      </div>
    </div>
  </div>
</section>